<header class="app-header">
  <div class="header-content">
    <div class="header-brand">
      <h1>
        <a routerLink="/dashboard" class="brand-link">üçÖ PomodoFlow</a>
      </h1>
    </div>

    <div class="header-user">
      @if (currentUser()) {
      <div class="user-menu">
        <button class="user-menu-trigger" (click)="toggleDropdown()">
          <div class="user-avatar">
            <iconify-icon icon="uil:user" width="20" height="20"></iconify-icon>
          </div>
          <span class="user-name">{{ currentUser()!.name }}</span>
          <iconify-icon
            class="dropdown-arrow"
            [class.open]="isDropdownOpen()"
            icon="mdi:chevron-down"
            width="16"
            height="16"
          >
          </iconify-icon>
        </button>

        @if (isDropdownOpen()) {
        <div class="dropdown-menu">
          <div class="dropdown-header">
            <div class="dropdown-user-name">{{ currentUser()!.name }}</div>
            <div class="dropdown-user-email">{{ currentUser()!.email }}</div>
          </div>
          <div class="dropdown-divider"></div>
          <a routerLink="/settings" class="dropdown-item" (click)="closeDropdown()">
            <iconify-icon icon="mdi:cog" width="18" height="18"></iconify-icon>
            Settings
          </a>
          <div class="dropdown-divider"></div>
          <button class="dropdown-item logout" (click)="onLogout()">
            <iconify-icon icon="mdi:logout" width="18" height="18"></iconify-icon>
            Logout
          </button>
        </div>
        }
      </div>
      }
    </div>
  </div>
</header>
